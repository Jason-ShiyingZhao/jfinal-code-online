<#include "/common/template.html" />
<div class="pageContent">
    <form method="post" action="group/save" class="pageForm required-validate"
          onsubmit="return validateCallback(this, navTabAjaxDone);">

        <input type="hidden" name="group.id" value="${group.id}">

        <div class="pageFormContent" layoutH="56">
            <p>
                <label>任务组名：</label>
                <input name="group.name" class="required" type="text" size="30" value="${group.name}"/>
            </p>

            <p>
                <label>任务组备注：</label>
                <input name="group.remark" type="text" size="30" value="${group.remark}">
            </p>

            <p>
                <label>包含任务：</label>
                <input name="tasks.ids" value="${taskIds}" type="hidden">
                <input name="tasks.taskNames" value="${taskNames}" type="text" size="30" class="required"/>
                <a class="btnLook" href="/task?taskIds=${taskIds}&lookup=1" lookupGroup="tasks">查找带回</a>
            </p>

            <div class="divider"></div>
            <h3 class="contentTitle">metadata management</h3>

            <div class="tabs">
                <div class="tabsHeader">
                    <div class="tabsHeaderContent">
                        <ul>
                            <li><a href="javascript:void(0)"><span>project metadata</span></a></li>
                            <li><a href="javascript:void(0)"><span>entity metadata</span></a></li>
                            <li><a href="javascript:void(0)"><span>field metadata</span></a></li>
                        </ul>
                    </div>
                </div>
                <div class="tabsContent" style="height: 300px;">
                    <div>
                        <table class="list nowrap itemDetail" addButton="新增参数" width="100%">
                            <thead>
                            <tr>
                                <th type="text" name="taskParams[#index#].name" size="20" fieldClass="required">
                                    name
                                </th>
                                <th type="text" name="taskParams[#index#].label" size="20" fieldClass="required">
                                    label
                                </th>
                                <th type="del" width="60">操作</th>
                            </tr>
                            </thead>
                            <tbody>

                            <#list task.taskParams as item>
                                <tr>
                                    <input type="hidden" name="GroupMetadatas[${item_index}].type" value="project">
                                    <td>
                                        <input type="text" name="GroupMetadatas[${item_index}].name"
                                               value="${item.name}" size="20"
                                               class="required textInput valid">
                                    </td>
                                    <td>
                                        <input type="text" name="GroupMetadatas[${item_index}].label"
                                               value="${item.label}"
                                               size="20" class="required textInput valid">
                                    </td>
                                    <td>
                                        <a href="javascript:void(0)" class="btnDel ">删除</a>
                                    </td>
                                </tr>
                            </#list>

                            </tbody>
                        </table>
                    </div>
                    <div>
                        <table class="list nowrap itemDetail" addButton="新增参数" width="100%">
                            <thead>
                            <tr>
                                <th type="text" name="taskParams[#index#].name" size="20" fieldClass="required">
                                    name
                                </th>
                                <th type="text" name="taskParams[#index#].label" size="20" fieldClass="required">
                                    label
                                </th>
                                <th type="del" width="60">操作</th>
                            </tr>
                            </thead>
                            <tbody>

                            <#list task.taskParams as item>
                                <tr>
                                    <input type="hidden" name="GroupMetadatas[${item_index}].type" value="entity">
                                    <td>
                                        <input type="text" name="GroupMetadatas[${item_index}].name"
                                               value="${item.name}" size="20"
                                               class="required textInput valid">
                                    </td>
                                    <td>
                                        <input type="text" name="GroupMetadatas[${item_index}].label"
                                               value="${item.label}"
                                               size="20" class="required textInput valid">
                                    </td>
                                    <td>
                                        <a href="javascript:void(0)" class="btnDel ">删除</a>
                                    </td>
                                </tr>
                            </#list>

                            </tbody>
                        </table>
                    </div>
                    <div>
                        <table class="list nowrap itemDetail" addButton="新增参数" width="100%">
                            <thead>
                            <tr>
                                <th type="text" name="taskParams[#index#].name" size="20" fieldClass="required">
                                    name
                                </th>
                                <th type="text" name="taskParams[#index#].label" size="20" fieldClass="required">
                                    label
                                </th>
                                <th type="del" width="60">操作</th>
                            </tr>
                            </thead>
                            <tbody>

                            <#list task.taskParams as item>
                                <tr>
                                    <input type="hidden" name="GroupMetadatas[${item_index}].type" value="field">
                                    <td>
                                        <input type="text" name="GroupMetadatas[${item_index}].name"
                                               value="${item.name}" size="20"
                                               class="required textInput valid">
                                    </td>
                                    <td>
                                        <input type="text" name="GroupMetadatas[${item_index}].label"
                                               value="${item.label}"
                                               size="20" class="required textInput valid">
                                    </td>
                                    <td>
                                        <a href="javascript:void(0)" class="btnDel ">删除</a>
                                    </td>
                                </tr>
                            </#list>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="formBar">
                <ul>
                    <li>
                        <div class="buttonActive">
                            <div class="buttonContent">
                                <button type="submit">保存</button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="button">
                            <div class="buttonContent">
                                <button type="button" class="close">取消</button>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
    </form>
</div>
